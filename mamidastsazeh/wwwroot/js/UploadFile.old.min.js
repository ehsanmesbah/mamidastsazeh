"use strict";$(function(){var n=$(".box"),t=$(".box__file"),i=t.next("label"),r=$(".box__bar"),u=$(".box__status").find("span"),o=$(".box__error").find("span"),s=$(".box__restart"),h=$("#videoGuid"),c=i.html(),l=t.attr("multiple")!=undefined,f=function(n,t){var r=t?1e3:1024,u,i;if(Math.abs(n)<r)return n+" B";u=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];i=-1;do n/=r,++i;while(Math.abs(n)>=r&&i<u.length-1);return n.toFixed(1)+" "+u[i]},a=function(){n.removeClass("is-error").removeClass("is-uploading").removeClass("is-success");t.click()},e;if(t.each(function(){t.on("change",function(r){var u="";this.files&&this.files.length>1&&l?u=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):r.target.value&&(u=r.target.value.split("\\").pop());u?i.find("span").html(u):i.html(c);t.prop("files").length>0&&n.submit()});t.on("focus",function(){t.addClass("has-focus")}).on("blur",function(){t.removeClass("has-focus")})}),e=function(){var n=document.createElement("div");return("draggable"in n||"ondragstart"in n&&"ondrop"in n)&&"FormData"in window&&"FileReader"in window}(),e){n.addClass("has-advanced-upload");n.on("drag dragstart dragend dragover dragenter dragleave drop",function(n){n.preventDefault();n.stopPropagation()}).on("dragover dragenter",function(){n.addClass("is-dragover")}).on("dragleave dragend drop",function(){n.removeClass("is-dragover")}).on("drop",function(n){t.prop("files",n.originalEvent.dataTransfer.files).trigger("change")})}s.on("click",function(n){n.preventDefault();a()});n.ajaxForm({dataType:"json",beforeSend:function(){u.empty();r.attr("aria-valuenow","0").width("0%").html("0%");n.addClass("is-uploading")},uploadProgress:function(n,t,i,e){let o=f(i,!1),s=f(t,!1);u.html(`${s} of ${o}`);r.attr("aria-valuenow",e).width(`${e}%`).html(`${e}%`)},complete:function(t){n.removeClass("is-uploading");var i=t.responseJSON;i.success?(n.addClass("is-success"),i.FileName!=null&&i.FileName!=""&&h.val(i.FileName),i.ThumbnailName!=null&&i.ThumbnailName!=""&&$("#thumbnailGuid").val(i.ThumbnailName)):(n.addClass("is-error"),o.text(i.error))},error:function(){n.removeClass("is-uploading")}})});