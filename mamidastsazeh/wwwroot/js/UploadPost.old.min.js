"use strict";$(function(){var n=$(".box"),t=$(".box__file"),i=t.next("label"),r=$(".box__bar"),u=$(".box__status").find("span"),o=$(".box__error").find("span"),s=$(".box__restart"),a=$("#videoGuid"),v=$("#image1"),h=i.html(),c=t.attr("multiple")!=undefined,f=function(n,t){var r=t?1e3:1024,u,i;if(Math.abs(n)<r)return n+" B";u=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];i=-1;do n/=r,++i;while(Math.abs(n)>=r&&i<u.length-1);return n.toFixed(1)+" "+u[i]},l=function(){n.removeClass("is-error").removeClass("is-uploading").removeClass("is-success");t.click()},e;if(t.each(function(){t.on("change",function(r){var u="";this.files&&this.files.length>1&&c?u=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):r.target.value&&(u=r.target.value.split("\\").pop());u?i.find("span").html(u):i.html(h);alert("test");t.prop("files").length>0&&n.submit()});t.on("focus",function(){t.addClass("has-focus")}).on("blur",function(){t.removeClass("has-focus")})}),e=function(){var n=document.createElement("div");return("draggable"in n||"ondragstart"in n&&"ondrop"in n)&&"FormData"in window&&"FileReader"in window}(),e){n.addClass("has-advanced-upload");n.on("drag dragstart dragend dragover dragenter dragleave drop",function(n){n.preventDefault();n.stopPropagation()}).on("dragover dragenter",function(){n.addClass("is-dragover")}).on("dragleave dragend drop",function(){n.removeClass("is-dragover")}).on("drop",function(n){t.prop("files",n.originalEvent.dataTransfer.files).trigger("change")})}s.on("click",function(n){n.preventDefault();l()});$("#removephotos").on("click",function(){var n=$('input[name="videoGuid"]').map(function(){return this.value}).get();$.ajax({type:"POST",url:"/Membership/Panel/RemovePhotosAjax",data:{videoGuids:n},headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},success:function(){},failure:function(){},error:function(){}});$(".ul-uploadimages").empty()});n.ajaxForm({dataType:"json",beforeSend:function(){u.empty();r.attr("aria-valuenow","0").width("0%").html("0%");n.addClass("is-uploading")},uploadProgress:function(n,t,i,e){let o=f(i,!1),s=f(t,!1);u.html(`${s} of ${o}`);r.attr("aria-valuenow",e).width(`${e}%`).html(`${e}%`)},complete:function(t){n.removeClass("is-uploading");var i=t.responseJSON;i.success?($(".sortmessage").remove(),$(".UploadedPhotos").prepend('<p class="sortmessage"> آخرین تصویر کاور آموزش می باشد،با دکمه های جلوی تصاویر ترتیب آنها را مشخص کنید،<\/p>'),$.each(i.guid,function(n,t){$(".ul-uploadimages").prepend(' <li id="li_11" class="li_question"><input type="hidden"  name="imageGuids"  class="videoGuid" value="'+t+'" /><img class="uploaded-img  pl-1 pb-2" id="theImg'+n+'" src="/photos/tempphotos/'+t+'" /> <a onclick="up(this)" style="cursor:pointer;"><i class="fas fa-angle-double-up pr-3"  style="color:green;"><\/i><\/a><a onclick="down(this)" style="cursor:pointer;"><i class="pr-2 fas fa-angle-double-down " style="color:red;"><\/i><\/a><\/li>')})):(n.addClass("is-error"),o.text(i.error))},error:function(){n.removeClass("is-uploading")}})});